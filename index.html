<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Divergent Aptitude Test</title>
  <style>
    :root{
      --bg:#0b0d12;
      --card:#121624;
      --card2:#0f1320;
      --text:#e9ecff;
      --muted:#b9c0ff;
      --accent:#8b5cf6;
      --accent2:#22c55e;
      --danger:#ef4444;
      --line:#232a44;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 700px at 20% 10%, rgba(139,92,246,.25), transparent 60%),
                  radial-gradient(900px 600px at 85% 25%, rgba(34,197,94,.18), transparent 55%),
                  radial-gradient(900px 700px at 50% 110%, rgba(59,130,246,.15), transparent 55%),
                  var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding:24px 14px 50px;
    }
    .wrap{width:min(920px, 100%);}
    header{
      display:flex;
      gap:14px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
      margin-bottom:16px;
    }
    .title{
      background: linear-gradient(90deg, #a78bfa, #60a5fa, #34d399);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      font-weight:800;
      letter-spacing:.2px;
      font-size: clamp(22px, 4vw, 34px);
      margin:0;
      line-height:1.05;
    }
    .sub{
      margin:8px 0 0;
      color:var(--muted);
      font-size:14px;
      line-height:1.35;
      max-width:62ch;
    }
    .pillbar{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
    }
    .pill{
      border:1px solid var(--line);
      background: rgba(18,22,36,.65);
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
      backdrop-filter: blur(6px);
    }
    .card{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(18,22,36,.88), rgba(15,19,32,.88));
      border-radius:18px;
      padding:18px;
      box-shadow: 0 20px 70px rgba(0,0,0,.35);
      backdrop-filter: blur(8px);
    }
    .row{display:flex; gap:14px; flex-wrap:wrap;}
    .left{flex: 1 1 520px;}
    .right{flex: 0 0 320px;}
    .progress{
      height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.08);
      overflow:hidden;
      margin:10px 0 6px;
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, var(--accent), #60a5fa, var(--accent2));
      transition: width .25s ease;
    }
    .qnum{color:var(--muted); font-size:12px; margin:0 0 10px;}
    .qtext{font-size:18px; margin:0 0 14px; line-height:1.25;}
    .choices{display:grid; gap:10px;}
    button.choice{
      width:100%;
      text-align:left;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color:var(--text);
      padding:12px 12px;
      border-radius:14px;
      font-size:14px;
      line-height:1.25;
      cursor:pointer;
      transition: transform .06s ease, background .15s ease, border-color .15s ease;
    }
    button.choice:hover{background: rgba(255,255,255,.06); border-color: rgba(167,139,250,.35);}
    button.choice:active{transform: scale(.99);}
    .controls{
      display:flex;
      gap:10px;
      margin-top:14px;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:center;
    }
    .btn{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:600;
      font-size:13px;
    }
    .btn:hover{border-color: rgba(167,139,250,.35);}
    .btn.primary{
      background: linear-gradient(90deg, rgba(139,92,246,.9), rgba(96,165,250,.85));
      border-color: rgba(139,92,246,.55);
    }
    .side h3{
      margin:0 0 10px;
      font-size:14px;
      color:var(--muted);
      font-weight:700;
      letter-spacing:.3px;
      text-transform: uppercase;
    }
    .mini{
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      border-radius:14px;
      padding:12px;
      margin-bottom:12px;
    }
    .mini p{margin:0; color:var(--muted); font-size:13px; line-height:1.35;}
    .scoregrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:8px;
      margin-top:10px;
    }
    .score{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      border-radius:12px;
      padding:10px;
    }
    .score .label{font-size:12px; color:var(--muted); margin:0 0 3px;}
    .score .val{font-size:18px; font-weight:800; margin:0;}
    .result{
      display:none;
      margin-top:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      border-radius:16px;
      padding:14px;
    }
    .result h2{margin:0 0 6px; font-size:20px;}
    .result p{margin:0; color:var(--muted); line-height:1.35;}
    footer{
      margin-top:14px;
      color:rgba(185,192,255,.75);
      font-size:12px;
      text-align:center;
    }
    .tag{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(139,92,246,.18);
      border:1px solid rgba(139,92,246,.35);
      color:var(--text);
      font-weight:700;
      font-size:12px;
      margin-top:10px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1 class="title">Divergent Aptitude Test</h1>
        <p class="sub">
          Choose the option you’d do first. No “favorite color” questions — this is decision-based.
          You’ll get a faction… or <b>Divergent</b> if you score strongly in more than one.
        </p>
      </div>
      <div class="pillbar">
        <div class="pill">Abnegation • Dauntless • Erudite</div>
        <div class="pill">Candor • Amity • Divergent</div>
      </div>
    </header>

    <div class="row">
      <div class="left">
        <div class="card">
          <p class="qnum" id="qnum">Question 1 of 10</p>
          <div class="progress"><div class="bar" id="bar"></div></div>
          <h2 class="qtext" id="qtext">Loading…</h2>
          <div class="choices" id="choices"></div>

          <div class="controls">
            <button class="btn" id="backBtn" disabled>← Back</button>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button class="btn" id="resetBtn">Reset</button>
              <button class="btn primary" id="finishBtn" style="display:none;">See Results</button>
            </div>
          </div>

          <div class="result" id="resultBox">
            <h2 id="resultTitle">Result</h2>
            <p id="resultDesc"></p>
            <div class="tag" id="resultTag"></div>
          </div>
        </div>

        <footer>Made for practice + fun. Not official.</footer>
      </div>

      <div class="right side">
        <div class="mini">
          <h3>Tip</h3>
          <p>Don’t overthink — first instinct is the “aptitude test” vibe.</p>
        </div>

        <div class="mini">
          <h3>Scoreboard</h3>
          <p style="margin-bottom:8px;">Your points update as you go.</p>
          <div class="scoregrid" id="scoreGrid"></div>
        </div>

        <div class="mini">
          <h3>How “Divergent” works</h3>
          <p>If you have <b>two</b> strong top factions (close scores), you’ll get Divergent.</p>
        </div>
      </div>
    </div>
  </div>

<script>
  // Mapping: each choice letter corresponds to a faction.
  // A = Abnegation, B = Dauntless, C = Erudite, D = Candor, E = Amity
  const map = { A:"Abnegation", B:"Dauntless", C:"Erudite", D:"Candor", E:"Amity" };

  const questions = [
    {
      text: "You see a stranger collapse in a crowded place.",
      choices: {
        A:"Help immediately, even if no one notices.",
        B:"Step in fast and take control.",
        C:"Observe and assess before acting.",
        D:"Shout for help and demand action.",
        E:"Stay calm and comfort them."
      }
    },
    {
      text: "You’re given a rule you believe is wrong.",
      choices: {
        A:"Follow it anyway to protect others.",
        B:"Break it without hesitation.",
        C:"Research and challenge it logically.",
        D:"Confront the authority openly.",
        E:"Try to find a compromise."
      }
    },
    {
      text: "Someone accuses your friend of cheating.",
      choices: {
        A:"Defend them quietly.",
        B:"Challenge the accuser aggressively.",
        C:"Ask for evidence.",
        D:"Demand the truth from everyone involved.",
        E:"Try to calm the situation down."
      }
    },
    {
      text: "You feel afraid, but no one else seems to.",
      choices: {
        A:"Hide it so others don’t worry.",
        B:"Push through it anyway.",
        C:"Analyze why you’re afraid.",
        D:"Admit it openly.",
        E:"Look for reassurance."
      }
    },
    {
      text: "In a group project, you naturally become the person who…",
      choices: {
        A:"Checks on everyone and supports the quiet people.",
        B:"Takes risks to move things forward.",
        C:"Plans the strategy and organizes roles.",
        D:"Says what everyone is thinking.",
        E:"Keeps the peace and stops drama."
      }
    },
    {
      text: "You witness someone being treated unfairly.",
      choices: {
        A:"Help them quietly and protect them from attention.",
        B:"Step in immediately, even if it gets messy.",
        C:"Gather facts before taking action.",
        D:"Call it out publicly and directly.",
        E:"Try to mediate so it doesn’t escalate."
      }
    },
    {
      text: "When making a big decision, you rely most on…",
      choices: {
        A:"How it affects other people.",
        B:"Instinct and courage.",
        C:"Logic and evidence.",
        D:"Honesty, even if it hurts.",
        E:"What keeps harmony and reduces conflict."
      }
    },
    {
      text: "A friend asks you to lie to protect them.",
      choices: {
        A:"Refuse, but try to help in another way.",
        B:"Lie if it keeps them safe — no hesitation.",
        C:"Ask questions first; find a smarter solution.",
        D:"Refuse. The truth matters more.",
        E:"Try to avoid the situation entirely and calm them down."
      }
    },
    {
      text: "You’re offered a chance to win something important by taking a big risk.",
      choices: {
        A:"Only if it won’t hurt anyone else.",
        B:"Take it. You’ll figure it out mid-jump.",
        C:"Calculate the odds first.",
        D:"Take it if it’s fair and transparent.",
        E:"Skip it — you’d rather keep things steady."
      }
    },
    {
      text: "You discover a secret that could cause chaos if revealed.",
      choices: {
        A:"Keep it if it protects people.",
        B:"Use it if it helps you survive.",
        C:"Study it and verify everything first.",
        D:"Tell the truth to the people who need it.",
        E:"Tell someone trustworthy who can keep peace."
      }
    }
  ];

  const descriptions = {
    Abnegation: "You protect people, put others first, and stay steady under pressure. Quiet strength.",
    Dauntless: "You act fast, face fear head-on, and lead with courage. Bold, decisive energy.",
    Erudite: "You analyze, learn, and question. You want the truth backed by evidence and logic.",
    Candor: "You value honesty and directness. You say what’s real, even when it’s uncomfortable.",
    Amity: "You keep peace, care for people, and calm conflict. You’re the stabilizing force."
  };

  // If the top two factions are close, we call it Divergent.
  function computeResult(scores){
    const entries = Object.entries(scores).sort((a,b)=>b[1]-a[1]); // desc
    const [topFaction, topScore] = entries[0];
    const [secondFaction, secondScore] = entries[1];

    // Divergent condition:
    // - second is within 1 point of top
    // - and top score is at least 3 (so it’s not random)
    if (topScore >= 3 && (topScore - secondScore) <= 1) {
      return {
        name: "Divergent",
        tag: `${topFaction} + ${secondFaction}`,
        desc: `You showed strong traits in more than one faction. Your top two are ${topFaction} and ${secondFaction}.`
      };
    }
    return {
      name: topFaction,
      tag: topFaction,
      desc: descriptions[topFaction] || "You matched a faction profile."
    };
  }

  let idx = 0;
  const answers = Array(questions.length).fill(null);
  const scores = { Abnegation:0, Dauntless:0, Erudite:0, Candor:0, Amity:0 };

  const qnumEl = document.getElementById("qnum");
  const qtextEl = document.getElementById("qtext");
  const choicesEl = document.getElementById("choices");
  const barEl = document.getElementById("bar");
  const backBtn = document.getElementById("backBtn");
  const resetBtn = document.getElementById("resetBtn");
  const finishBtn = document.getElementById("finishBtn");
  const scoreGrid = document.getElementById("scoreGrid");

  const resultBox = document.getElementById("resultBox");
  const resultTitle = document.getElementById("resultTitle");
  const resultDesc = document.getElementById("resultDesc");
  const resultTag = document.getElementById("resultTag");

  function rebuildScores(){
    for (const k of Object.keys(scores)) scores[k] = 0;
    for (const a of answers){
      if (!a) continue;
      const faction = map[a];
      if (faction) scores[faction] += 1;
    }
  }

  function renderScoreboard(){
    scoreGrid.innerHTML = "";
    const ordered = Object.entries(scores).sort((a,b)=>b[1]-a[1]);
    for (const [name,val] of ordered){
      const div = document.createElement("div");
      div.className = "score";
      div.innerHTML = `<p class="label">${name}</p><p class="val">${val}</p>`;
      scoreGrid.appendChild(div);
    }
  }

  function render(){
    rebuildScores();
    renderScoreboard();

    const total = questions.length;
    qnumEl.textContent = `Question ${idx+1} of ${total}`;
    barEl.style.width = `${(idx/total)*100}%`;

    const q = questions[idx];
    qtextEl.textContent = q.text;

    choicesEl.innerHTML = "";
    for (const letter of ["A","B","C","D","E"]){
      const btn = document.createElement("button");
      btn.className = "choice";
      const selected = answers[idx] === letter;
      btn.innerHTML = `<b>${letter}.</b> ${q.choices[letter]}${selected ? " ✅" : ""}`;
      btn.onclick = () => {
        answers[idx] = letter;
        // Auto-advance if not last question
        if (idx < total-1) idx += 1;
        render();
      };
      choicesEl.appendChild(btn);
    }

    backBtn.disabled = idx === 0;
    finishBtn.style.display = answers.every(Boolean) ? "inline-block" : "none";

    // Hide result while taking quiz
    resultBox.style.display = "none";
  }

  backBtn.onclick = () => {
    if (idx > 0) idx -= 1;
    render();
  };

  resetBtn.onclick = () => {
    for (let i=0;i<answers.length;i++) answers[i]=null;
    idx = 0;
    resultBox.style.display = "none";
    render();
  };

  finishBtn.onclick = () => {
    rebuildScores();
    const res = computeResult(scores);
    barEl.style.width = "100%";
    resultTitle.textContent = res.name === "Divergent" ? "Result: Divergent" : `Result: ${res.name}`;
    resultDesc.textContent = res.desc;
    resultTag.textContent = res.name === "Divergent" ? `Top factions: ${res.tag}` : `Faction: ${res.tag}`;
    resultBox.style.display = "block";
    // scroll to result
    resultBox.scrollIntoView({behavior:"smooth", block:"start"});
  };

  render();
</script>
</body>
</html>